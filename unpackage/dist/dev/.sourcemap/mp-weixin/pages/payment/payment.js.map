{"version":3,"sources":["webpack:///D:/0/HBuilderProjects/exclusive-mall-front/main.js","webpack:///D:/0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue?24be","webpack:///D:/0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue?48de","webpack:///D:/0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue?8735","webpack:///D:/0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue?d9a6","webpack:///D:/0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue","webpack:///D:/0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue?a1eb","webpack:///D:/0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue?05c0"],"names":["createPage","Page","data","hasAddress","isWx","isWebWx","isWeb","remark","payData","address","goodsList","balanceType","fee","methods","linkToAddress","addressRecipients","uni","navigateTo","url","linkToCoupon","redirectTo","switchChange","e","Number","detail","value","handleWxPay","$http","post","payChannels","then","res","resultOrderId","result","orderId","console","log","orderState","showToast","icon","title","removeStorageSync","setTimeout","callBackNo","orderNo","code","wx","requestPayment","payResponse","wxPayResponse","timeStamp","nonceStr","packageStr","signType","paySign","sc","er","msg","message","catch","err","handleWxWebPay","window","location","href","paymentUrl","baseInfo","mallDomain","payPrice","baseUrl","encodeURIComponent","token","handleWebPay","handleSubmit","accountId","userInfo","addressId","balance","balancePay","isBalance","credits","expressFee","express","totalPrice","goodsPrice","totalPriceDecrease","checkEnvironment","navigator","userAgent","browserRedirect","sUserAgent","toLowerCase","bIsWeChat","match","getOrderData","getStorageSync","goodsListDetailList","map","item","mallGoodsId","id","push","computed","onShow","onBackPress","onLoad","option"],"mappings":"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","file":"pages/payment/payment.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/payment/payment.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./payment.vue?vue&type=template&id=6e67e167&\"\nimport script from \"./payment.vue?vue&type=script&lang=js&\"\nexport * from \"./payment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./payment.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\software\\\\HBuilder\\\\HBuilderX.2.1.3.20190723\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('6e67e167', component.options)\n    } else {\n      api.reload('6e67e167', component.options)\n    }\n    module.hot.accept(\"./payment.vue?vue&type=template&id=6e67e167&\", function () {\n      api.rerender('6e67e167', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue\"\nexport default component.exports","export * from \"-!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./payment.vue?vue&type=template&id=6e67e167&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./payment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./payment.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tmapState\n} from 'vuex'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\thasAddress: true,\n\t\t\tisWx: false,\n\t\t\tisWebWx: false,\n\t\t\tisWeb: false,\n\t\t\tremark: '',\n\t\t\tpayData: {},\n\t\t\taddress: {},\n\t\t\tgoodsList: [],\n\t\t\tbalanceType: 0,\n\t\t\tfee: 0,\n\t\t}\n\t},\n\tmethods: {\n\t\tlinkToAddress(){\n\t\t\tif(this.address.addressRecipients === '请先去创建地址'){\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: `/pages/addressManage/addressManage?type=add`\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/address/address?source=1'\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tlinkToCoupon(){\n\t\t\tuni.redirectTo({\n\t\t\t\turl: '/pages/coupon/coupon'\n\t\t\t})\n\t\t},\n\t\tswitchChange(e){\n\t\t\tthis.balanceType=Number(e.detail.value);\n\t\t},\n\t\thandleWxPay(data){\n\t\t\tthis.$http.post('/mall/app/order/submit', {\n\t\t\t\t...data,\n\t\t\t\tpayChannels: '8',\n\t\t\t})\n\t\t\t.then( res => {\n\t\t\t\tlet resultOrderId = res.result && res.result.orderId;\n\t\t\t\tconsole.log(res)\n\t\t\t\tif(res.result){\n\t\t\t\t\tif(res.result.orderState == 1){\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\ttitle: '订单提交成功'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tuni.removeStorageSync('chooseAddress');\n\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\turl: '/pages/orderDetail/orderDetail?orderId='+resultOrderId\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$http.post('/mall/app/order/submit', {\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\tpayChannels: '8',\n\t\t\t\t\t\t\tcallBackNo: res.result.orderNo\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then( res => {\n\t\t\t\t\t\t\tif(res.code == 0){\n\t\t\t\t\t\t\t\twx.requestPayment({\n\t\t\t\t\t\t\t\t\t'timeStamp': res.result.payResponse.wxPayResponse.timeStamp,\n\t\t\t\t\t\t\t\t\t'nonceStr': res.result.payResponse.wxPayResponse.nonceStr,\n\t\t\t\t\t\t\t\t\t'package': res.result.payResponse.wxPayResponse.packageStr,\n\t\t\t\t\t\t\t\t\t'signType': res.result.payResponse.wxPayResponse.signType,\n\t\t\t\t\t\t\t\t\t'paySign': res.result.payResponse.wxPayResponse.paySign,\n\t\t\t\t\t\t\t\t\t'success': function (sc) {\n\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\t\t\turl: '/pages/orderDetail/orderDetail?orderId='+resultOrderId\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t'fail': function (er) {\n\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\t\t\turl: '/pages/order/order?state=0'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t'complete': function(msg){\n\t\t\t\t\t\t\t\t\t\tconsole.log(msg);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\ttitle: res.message\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch( err => {\n\t\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\ttitle: res.message\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch( err => {\n\t\t\t\tconsole.log(err);\n\t\t\t})\n\t\t},\n\t\thandleWxWebPay(data){\n\t\t\tthis.$http.post('/mall/app/order/submit', {\n\t\t\t\t...data,\n\t\t\t\tpayChannels: '',\n\t\t\t})\n\t\t\t.then( res => {\n\t\t\t\tif(res.result && res.result.orderState == 1){\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\ttitle: '订单提交成功'\n\t\t\t\t\t})\n\t\t\t\t\tuni.removeStorageSync('chooseAddress');\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\turl: '/pages/orderDetail/orderDetail?orderId='+res.result.orderId\n\t\t\t\t\t\t})\n\t\t\t\t\t}, 1000)\n\t\t\t\t}else{\n\t\t\t\t\tif(res.code == 0){\n\t\t\t\t\t\twindow.location.href=`http://${this.paymentUrl}.yujianli.cn/#/pages/payment/cashRegister?orderNo=`+res.result.orderNo+\"&mallDomain=\"+this.baseInfo.mallDomain+'&orderPayPrice='+data.payPrice+'&baseUrl='+this.baseUrl+'&token='+encodeURIComponent(this.token);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\ttitle: res.message\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err => {\n\t\t\t\tconsole.log(err);\n\t\t\t})\n\t\t},\n\t\thandleWebPay(data){\n\t\t\tthis.$http.post('/mall/app/order/submit', {\n\t\t\t\t...data,\n\t\t\t\tpayChannels: '',\n\t\t\t})\n\t\t\t.then( res => {\n\t\t\t\tif(res.result.orderState == 1){\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\ttitle: '订单提交成功'\n\t\t\t\t\t})\n\t\t\t\t\tuni.removeStorageSync('chooseAddress');\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\turl: '/pages/orderDetail/orderDetail?orderId='+res.result.orderId\n\t\t\t\t\t\t})\n\t\t\t\t\t}, 1000)\n\t\t\t\t}else{\n\t\t\t\t\tthis.$http.post('/mall/app/order/submit', {\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\tpayChannels: '2',\n\t\t\t\t\t\tcallBackNo: res.result.orderNo\n\t\t\t\t\t})\n\t\t\t\t\t.then( res => {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t})\n\t\t\t\t\t.catch( err => {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err => {\n\t\t\t\tconsole.log(err);\n\t\t\t})\n\t\t},\n\t\thandleSubmit(){\n\t\t\tif(!this.hasAddress){\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\ttitle: '请先去创建地址'\n\t\t\t\t})\n\t\t\t}\n\t\t\tlet data = {\n\t\t\t\t...this.baseInfo,\n\t\t\t\taccountId: this.userInfo.accountId,\n\t\t\t\taddressId: this.address.addressId,\n\t\t\t\tbalance: this.balancePay,\n\t\t\t\tisBalance: this.balanceType,\n\t\t\t\tcredits: this.payData.credits,\n\t\t\t\texpressFee: this.payData.express.fee,\n\t\t\t\tgoodsList: this.goodsList,\n\t\t\t\tpayPrice: this.payPrice,\n\t\t\t\tremark: this.remark,\n\t\t\t\ttotalPrice: this.payData.totalPrice,\n\t\t\t\tgoodsPrice: this.totalPriceDecrease,\n\t\t\t\taddress: this.address\n\t\t\t};\n\t\t\tif(this.isWx){\n\t\t\t\tthis.handleWxPay(data);\n\t\t\t}else if(this.isWebWx){\n\t\t\t\tthis.handleWxWebPay(data);\n\t\t\t}else if(this.isWeb){\n\t\t\t\tthis.handleWebPay(data);\n\t\t\t}\n\t\t},\n\t\tcheckEnvironment(){\n\t\t\tif(navigator && navigator.userAgent){\n\t\t\t\t// 非小程序\n\t\t\t\tthis.browserRedirect();\n\t\t\t}else{\n\t\t\t\t// 小程序\n\t\t\t\tthis.isWx=true;\n\t\t\t};\n\t\t},\n\t\tbrowserRedirect() {\n\t\t\tvar sUserAgent = navigator.userAgent.toLowerCase();\n\t\t\tvar bIsWeChat = sUserAgent.match(/MicroMessenger/i) == \"micromessenger\";\n\t\t\tif(bIsWeChat) {\n\t\t\t\tthis.isWebWx=true;\n\t\t\t}else {\n\t\t\t\tthis.isWeb=true;\n\t\t\t}\n\t\t},\n\t\tgetOrderData(){\n\t\t\tthis.$http.post('/mall/app/order/confirm', {\n\t\t\t\t...this.baseInfo,\n\t\t\t\taccountId: this.userInfo.accountId,\n\t\t\t\tgoodsList: uni.getStorageSync('buyList')\n\t\t\t})\n\t\t\t.then( res => {\n\t\t\t\tif(res.code == 0){\n\t\t\t\t\tif(!res.result.address){\n\t\t\t\t\t\tthis.hasAddress=false;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.hasAddress=true;\n\t\t\t\t\t}\n\t\t\t\t\tthis.payData=res.result;\n\t\t\t\t\tthis.address=res.result.address || {};\n\t\t\t\t\tthis.address.addressRecipients=res.result.address && res.result.address.addressRecipients || '请先去创建地址';\n\t\t\t\t\tres.result.goodsListDetailList.map(item => {\n\t\t\t\t\t\titem.mallGoodsId=item.id;\n\t\t\t\t\t\tthis.goodsList.push(item);\n\t\t\t\t\t});\n\t\t\t\t\tthis.fee=res.result.express.fee;\n\t\t\t\t\tif(uni.getStorageSync('chooseAddress')){\n\t\t\t\t\t\tthis.address=uni.getStorageSync('chooseAddress');\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('payment.vue-- confirm接口获取数据失败');\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch( err => {\n\t\t\t\tconsole.log('payment.vue-- confirm接口获取数据错误' + err);\n\t\t\t})\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapState('common', ['baseInfo', 'userInfo', 'paymentUrl', 'baseUrl', 'token']),\n\t\t// ...mapState('order', ['order_goodsList'])\n\t\t\n\t\t// balancePay(){\n\t\t// \treturn this.payData.totalPrice+this.fee>this.payData.balance ? this.payData.balance : this.payData.totalPrice+this.fee\n\t\t// },\n\t\t// payPrice(){\n\t\t// \treturn this.balanceType ? this.payData.totalPrice+this.fee - this.balancePay : this.payData.totalPrice+this.fee\n\t\t// },\n\t\ttotalPriceDecrease(){\n\t\t\treturn this.payData.totalPrice-(this.payData.express && this.payData.express.fee)\n\t\t},\n\t\tbalancePay(){\n\t\t\treturn this.totalPriceDecrease+this.fee>this.payData.balance ? this.payData.balance : this.totalPriceDecrease+this.fee\n\t\t},\n\t\tpayPrice(){\n\t\t\treturn this.balanceType ? this.totalPriceDecrease+this.fee - this.balancePay : this.totalPriceDecrease+this.fee\n\t\t}\n\t},\n\tonShow(){\n\t\tthis.getOrderData();\n\t},\n\tonBackPress(){\n\t\tuni.removeStorageSync('chooseAddress');\n\t},\n\tonLoad(option){\n\t\tthis.checkEnvironment();\n\t},\n}\n","import mod from \"-!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./payment.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./payment.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}