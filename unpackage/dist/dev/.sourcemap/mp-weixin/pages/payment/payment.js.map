{"version":3,"sources":["webpack:///D:/0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue","webpack:///D:/0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue?82bd","webpack:///D:/0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue?bc54","webpack:///D:/0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue?3fee","webpack:///D:/0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue?4947","webpack:///D:/0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue?9973","webpack:///D:/0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue?cfeb"],"names":["data","hasAddress","isWx","isWebWx","isWeb","remark","payData","address","goodsList","balanceType","fee","methods","linkToCoupon","uni","redirectTo","url","switchChange","e","Number","detail","value","handleWxPay","$http","post","payChannels","then","res","result","orderState","showToast","icon","title","setTimeout","callBackNo","orderNo","wx","requestPayment","payResponse","wxPayResponse","timeStamp","nonceStr","packageStr","signType","paySign","sc","console","log","er","msg","catch","err","handleWxWebPay","handleWebPay","handleSubmit","baseInfo","accountId","userInfo","addressId","balance","balancePay","isBalance","credits","expressFee","express","payPrice","totalPrice","checkEnvironment","navigator","userAgent","browserRedirect","sUserAgent","toLowerCase","bIsIpad","match","bIsIphoneOs","bIsMidp","bIsUc7","bIsUc","bIsAndroid","bIsCE","bIsWM","bIsWeChat","getOrderData","getStorageSync","code","addressRecipients","goodsListDetailList","map","item","mallGoodsId","id","push","computed","onShow","onLoad","option"],"mappings":"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","file":"pages/payment/payment.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tmapState\n} from 'vuex'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\t// maskState: 0, //优惠券面板显示状态\n\t\t\t// desc: '', //备注\n\t\t\t// payType: 1, //1微信 2支付宝\n\t\t\t// couponList: [\n\t\t\t// \t{\n\t\t\t// \t\ttitle: '新用户专享优惠券',\n\t\t\t// \t\tprice: 5,\n\t\t\t// \t},\n\t\t\t// \t{\n\t\t\t// \t\ttitle: '庆五一发一波优惠券',\n\t\t\t// \t\tprice: 10,\n\t\t\t// \t},\n\t\t\t// \t{\n\t\t\t// \t\ttitle: '优惠券优惠券优惠券优惠券',\n\t\t\t// \t\tprice: 15,\n\t\t\t// \t}\n\t\t\t// ],\n\t\t\t// addressData: {\n\t\t\t// \tname: '许小星',\n\t\t\t// \tmobile: '13853988752',\n\t\t\t// \taddress: '湖北省武汉市江汉区淮海路泛海国际soho',\n\t\t\t// \tarea: '123',\n\t\t\t// \tdefault: false,\n\t\t\t// },\n\t\t\thasAddress: true,\n\t\t\tisWx: false,\n\t\t\tisWebWx: false,\n\t\t\tisWeb: false,\n\t\t\tremark: '',\n\t\t\tpayData: {},\n\t\t\taddress: {},\n\t\t\tgoodsList: [],\n\t\t\tbalanceType: 0,\n\t\t\tfee: 0\n\t\t}\n\t},\n\tmethods: {\n\t\tlinkToCoupon(){\n\t\t\tuni.redirectTo({\n\t\t\t\turl: '/pages/coupon/coupon'\n\t\t\t})\n\t\t},\n\t\tswitchChange(e){\n\t\t\tthis.balanceType=Number(e.detail.value);\n\t\t},\n\t\thandleWxPay(data){\n\t\t\tthis.$http.post('/mall/app/order/submit', {\n\t\t\t\t...data,\n\t\t\t\tpayChannels: '8',\n\t\t\t})\n\t\t\t.then( res => {\n\t\t\t\tif(res.result.orderState == 1){\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\ttitle: '订单提交成功'\n\t\t\t\t\t})\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t    url: '/pages/orderDetail/orderDetail'\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 1000)\n\t\t\t\t}else{\n\t\t\t\t\tthis.$http.post('/mall/app/order/submit', {\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\tpayChannels: '8',\n\t\t\t\t\t\tcallBackNo: res.result.orderNo\n\t\t\t\t\t})\n\t\t\t\t\t.then( res => {\n\t\t\t\t\t\twx.requestPayment({\n\t\t\t\t\t\t\t'timeStamp': res.result.payResponse.wxPayResponse.timeStamp,\n\t\t\t\t\t\t\t'nonceStr': res.result.payResponse.wxPayResponse.nonceStr,\n\t\t\t\t\t\t\t'package': res.result.payResponse.wxPayResponse.packageStr,\n\t\t\t\t\t\t\t'signType': res.result.payResponse.wxPayResponse.signType,\n\t\t\t\t\t\t\t'paySign': res.result.payResponse.wxPayResponse.paySign,\n\t\t\t\t\t\t\t'success': function (sc) {\n\t\t\t\t\t\t\t\tconsole.log(sc);\n\t\t\t\t\t\t\t\t// wx.redirectTo({\n\t\t\t\t\t\t\t\t// \turl: '/pages/translateOrder/translateOrder'\n\t\t\t\t\t\t\t\t// })\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'fail': function (er) {\n\t\t\t\t\t\t\t\tconsole.log(er);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'complete': function(msg){\n\t\t\t\t\t\t\t\tconsole.log(msg)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t\t.catch( err => {\n\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch( err => {\n\t\t\t\tconsole.log(err);\n\t\t\t})\n\t\t},\n\t\thandleWxWebPay(){\n\t\t\t// function onBridgeReady(){\n\t\t\t//    WeixinJSBridge.invoke(\n\t\t\t//       'getBrandWCPayRequest', {\n\t\t\t//          \"appId\":\"wx2421b1c4370ec43b\",     //公众号名称，由商户传入     \n\t\t\t//          \"timeStamp\":\"1395712654\",         //时间戳，自1970年以来的秒数     \n\t\t\t//          \"nonceStr\":\"e61463f8efa94090b1f366cccfbbb444\", //随机串     \n\t\t\t//          \"package\":\"prepay_id=u802345jgfjsdfgsdg888\",     \n\t\t\t//          \"signType\":\"MD5\",         //微信签名方式：     \n\t\t\t//          \"paySign\":\"70EA570631E4BB79628FBCA90534C63FF7FADD89\" //微信签名 \n\t\t\t//       },\n\t\t\t//       function(res){\n\t\t\t//       if(res.err_msg == \"get_brand_wcpay_request:ok\" ){\n\t\t\t//       // 使用以上方式判断前端返回,微信团队郑重提示：\n\t\t\t//             //res.err_msg将在用户支付成功后返回ok，但并不保证它绝对可靠。\n\t\t\t//       } \n\t\t\t//    }); \n\t\t\t// }\n\t\t\t// if (typeof WeixinJSBridge == \"undefined\"){\n\t\t\t//    if( document.addEventListener ){\n\t\t\t//        document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);\n\t\t\t//    }else if (document.attachEvent){\n\t\t\t//        document.attachEvent('WeixinJSBridgeReady', onBridgeReady); \n\t\t\t//        document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);\n\t\t\t//    }\n\t\t\t// }else{\n\t\t\t//    onBridgeReady();\n\t\t\t// }\n\t\t},\n\t\thandleWebPay(data){\n\t\t\tthis.$http.post('/mall/app/order/submit', {\n\t\t\t\t...data,\n\t\t\t\tpayChannels: '2',\n\t\t\t})\n\t\t\t.then( res => {\n\t\t\t\tif(res.result.orderState == 1){\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\ttitle: '订单提交成功'\n\t\t\t\t\t})\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t    url: '/pages/orderDetail/orderDetail'\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 1000)\n\t\t\t\t}else{\n\t\t\t\t\tthis.$http.post('/mall/app/order/submit', {\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\tpayChannels: '2',\n\t\t\t\t\t\tcallBackNo: res.result.orderNo\n\t\t\t\t\t})\n\t\t\t\t\t.then( res => {\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t})\n\t\t\t\t\t.catch( err => {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t\t.catch( err => {\n\t\t\t\tconsole.log(err);\n\t\t\t})\n\t\t},\n\t\thandleSubmit(){\n\t\t\tif(!this.hasAddress){\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\ttitle: '请先去创建地址'\n\t\t\t\t})\n\t\t\t}\n\t\t\tlet data = {\n\t\t\t\t...this.baseInfo,\n\t\t\t\taccountId: this.userInfo.accountId,\n\t\t\t\taddressId: this.address.addressId,\n\t\t\t\tbalance: this.balancePay,\n\t\t\t\tisBalance: this.balanceType,\n\t\t\t\tcredits: 0,\n\t\t\t\texpressFee: this.payData.express.fee,\n\t\t\t\tgoodsList: this.goodsList,\n\t\t\t\tpayPrice: this.payPrice,\n\t\t\t\tremark: this.remark,\n\t\t\t\ttotalPrice: this.payData.totalPrice,\n\t\t\t};\n\t\t\tif(this.isWx){\n\t\t\t\tthis.handleWxPay(data);\n\t\t\t}else if(this.isWebWx){\n\t\t\t\tthis.handleWxWebPay(data);\n\t\t\t}else if(this.isWeb){\n\t\t\t\tthis.handleWebPay(data);\n\t\t\t}\n\t\t\t\n\t\t\t// let payChannels = '',\n\t\t\t// \tarrStr = [];\n\t\t\t// \t// this.balancePay, this.payPrice\n\t\t\t// if(this.balanceType){\n\t\t\t// \tif(this.balancePay>0){\n\t\t\t// \t\tarrStr.push(0)\n\t\t\t// \t}\n\t\t\t// \tif(this.payPrice>0){\n\t\t\t// \t\tarrStr.push(0)\n\t\t\t// \t}\n\t\t\t// }else{\n\t\t\t// \t\n\t\t\t// }\n\t\t\t// console.log(arrStr)\n\t\t\t\n\t\t\t// this.$http.post('/mall/app/order/submit', {\n\t\t\t// \t...this.baseInfo,\n\t\t\t// \taccountId: this.userInfo.accountId,\n\t\t\t// \t// balance: this.balancePay,\n\t\t\t// \tisBalance: this.balanceType,\n\t\t\t// \tcredits: 0,\n\t\t\t// \texpressFee: this.payData.express.fee,\n\t\t\t// \tgoodsList: this.payData.goodsListDetailList,\n\t\t\t// \tpayChannels: '',\n\t\t\t// \tpayPrice: this.payPrice,\n\t\t\t// \tremark: this.remark,\n\t\t\t// \ttotalPrice: this.payData.totalPrice,\n\t\t\t// })\n\t\t\t// .then( res => {\n\t\t\t// \tcnsole.log(res);\n\t\t\t// })\n\t\t\t// .catch( err => {\n\t\t\t// \tconsole.log(err);\n\t\t\t// })\n\t\t},\n\t\tcheckEnvironment(){\n\t\t\tif(navigator && navigator.userAgent){\n\t\t\t\t// 非小程序\n\t\t\t\tthis.browserRedirect();\n\t\t\t}else{\n\t\t\t\t// 小程序\n\t\t\t\tthis.isWx=true;\n\t\t\t};\n\t\t},\n\t\tbrowserRedirect() {\n\t\t\tvar sUserAgent = navigator.userAgent.toLowerCase();\n\t\t\tvar bIsIpad = sUserAgent.match(/ipad/i) == \"ipad\";\n\t\t\tvar bIsIphoneOs = sUserAgent.match(/iphone os/i) == \"iphone os\";\n\t\t\tvar bIsMidp = sUserAgent.match(/midp/i) == \"midp\";\n\t\t\tvar bIsUc7 = sUserAgent.match(/rv:1.2.3.4/i) == \"rv:1.2.3.4\";\n\t\t\tvar bIsUc = sUserAgent.match(/ucweb/i) == \"ucweb\";\n\t\t\tvar bIsAndroid = sUserAgent.match(/android/i) == \"android\";\n\t\t\tvar bIsCE = sUserAgent.match(/windows ce/i) == \"windows ce\";\n\t\t\tvar bIsWM = sUserAgent.match(/windows mobile/i) == \"windows mobile\";\n\t\t\tvar bIsWeChat = sUserAgent.match(/MicroMessenger/i) == \"micromessenger\";//微信端\n\t\t\tif (bIsIpad || bIsIphoneOs || bIsMidp || bIsUc7 || bIsUc || bIsAndroid || bIsCE || bIsWM) {\n\t\t\t\tthis.isWeb=true;\n\t\t\t} else if(bIsWeChat) {\n\t\t\t\tthis.isWebWx=true;\n\t\t\t}else {\n\t\t\t\tconsole.log(\"login.vue--非h5环境\");\n\t\t\t}\n\t\t},\n\t\tgetOrderData(){\n\t\t\tthis.$http.post('/mall/app/order/confirm', {\n\t\t\t\t...this.baseInfo,\n\t\t\t\taccountId: this.userInfo.accountId,\n\t\t\t\tgoodsList: uni.getStorageSync('buyList')\n\t\t\t\t// goodsList: this.order_goodsList\n\t\t\t})\n\t\t\t.then( res => {\n\t\t\t\tconsole.log(res)\n\t\t\t\tif(res.code == 0){\n\t\t\t\t\tif(!res.result.address){\n\t\t\t\t\t\tthis.hasAddress=false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.payData=res.result;\n\t\t\t\t\tthis.address=res.result.address || {};\n\t\t\t\t\tthis.address.addressRecipients=res.result.address && res.result.address.addressRecipients || '请先去创建地址';\n\t\t\t\t\tres.result.goodsListDetailList.map(item => {\n\t\t\t\t\t\titem.mallGoodsId=item.id;\n\t\t\t\t\t\tthis.goodsList.push(item);\n\t\t\t\t\t});\n\t\t\t\t\tthis.fee=res.result.express.fee;\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('payment.vue-- confirm接口获取数据失败');\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch( err => {\n\t\t\t\tconsole.log('payment.vue-- confirm接口获取数据错误' + err);\n\t\t\t})\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapState('common', ['baseInfo', 'userInfo']),\n\t\t// ...mapState('order', ['order_goodsList'])\n\t\tbalancePay(){\n\t\t\treturn this.payData.totalPrice+this.fee>this.payData.balance ? this.payData.balance : this.payData.totalPrice+this.fee\n\t\t},\n\t\tpayPrice(){\n\t\t\treturn this.balanceType ? this.payData.totalPrice+this.fee - this.balancePay : this.payData.totalPrice+this.fee\n\t\t}\n\t},\n\tonShow(){\n\t\tthis.getOrderData();\n\t},\n\tonLoad(option){\n\t\tthis.checkEnvironment();\n\t\t//商品数据\n\t\t//let data = JSON.parse(option.data);\n\t\t//console.log(data);\n\t},\n}\n","import mod from \"-!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./payment.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./payment.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin","import { render, staticRenderFns } from \"./payment.vue?vue&type=template&id=6e67e167&\"\nimport script from \"./payment.vue?vue&type=script&lang=js&\"\nexport * from \"./payment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./payment.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\software\\\\HBuilder\\\\HBuilderX.2.1.3.20190723\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('6e67e167', component.options)\n    } else {\n      api.reload('6e67e167', component.options)\n    }\n    module.hot.accept(\"./payment.vue?vue&type=template&id=6e67e167&\", function () {\n      api.rerender('6e67e167', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"0/HBuilderProjects/exclusive-mall-front/pages/payment/payment.vue\"\nexport default component.exports","export * from \"-!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./payment.vue?vue&type=template&id=6e67e167&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./payment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilder/HBuilderX.2.1.3.20190723/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./payment.vue?vue&type=script&lang=js&\""],"sourceRoot":""}