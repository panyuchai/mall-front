(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{1893:function(o,n,e){"use strict";var t=e("80d1"),a=e.n(t);a.a},"63a6":function(o,n,e){"use strict";e.r(n);var t=e("6daf"),a=e.n(t);for(var l in t)"default"!==l&&function(o){e.d(n,o,function(){return t[o]})}(l);n["default"]=a.a},"6daf":function(o,n,e){"use strict";(function(o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=e("2f62"),a=e("43d4");function l(o){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},t=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e).filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.forEach(function(n){i(o,n,e[n])})}return o}function i(o,n,e){return n in o?Object.defineProperty(o,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[n]=e,o}var c={computed:l({},(0,t.mapState)("common",["uniCode","mallDomain","baseInfo","hasLogin"])),methods:l({},(0,t.mapMutations)("common",["SET_BASEINFO","SET_USERIFNO","SET_UNICODE","SET_MALLDOMAIN","SET_MALLTYPE","SET_MALLID"]),{checkMallType:function(){var o=this;this.$http.post("/mall/app/login/mall/shopmall/type",{mallDomain:this.mallDomain}).then(function(n){0==n.code?(o.SET_BASEINFO(l({},o.baseInfo,{mallDomain:o.mallDomain,mallType:n.result.type,mallId:n.result.mallId})),o.SET_MALLTYPE(n.result.type),o.SET_MALLID(n.result.mallId)):console.log("login--mallTaye 接口调用失败")}).catch(function(o){console.log("login--mallTaye 接口调用出错")})}}),onLaunch:function(n){this.checkMallType(),console.log("App Launch");var e=this;function t(){var o=navigator.userAgent.toLowerCase(),n="ipad"==o.match(/ipad/i),t="iphone os"==o.match(/iphone os/i),a="midp"==o.match(/midp/i),c="rv:1.2.3.4"==o.match(/rv:1.2.3.4/i),s="ucweb"==o.match(/ucweb/i),u="android"==o.match(/android/i),r="windows ce"==o.match(/windows ce/i),p="windows mobile"==o.match(/windows mobile/i),m="micromessenger"==o.match(/MicroMessenger/i);n||t||a||c||s||u||r||p?(console.log("h5端"),e.SET_BASEINFO(l({},e.baseInfo,{scm:"pc"}))):m?(e.SET_BASEINFO(l({},e.baseInfo,{scm:"h5"})),e.hasLogin||i()):console.log("App.vue--非h5环境")}function i(){e.$http.post("/app/login/mall/wxweb",{mallDomain:e.mallDomain}).then(function(o){console.log(o)}).catch(function(o){console.log("App.vue-- wxweb接口调用出错")})}function c(){function n(n){a.test.post("/mall/app/login/mall/wxapp",{mallDomain:e.mallDomain,jsCode:n}).then(function(n){200==n.statusCode?(o.removeStorageSync("sessionid"),o.setStorageSync("sessionid",n.header["Set-Cookie"]),e.$http.setConfig(function(n){return n.header["cookie"]=o.getStorageSync("sessionid")||"",n}),0==n.data.code?n.data.result.isSuccess?console.log("App.vue--wxapp 登陆成功"):console.log("App.vue--wxapp 登陆失败"):console.log("App.vue--wxapp 接口返回data出错")):console.log("App.vue--wxapp 接口调用失败")}).catch(function(o){console.log("App.vue--wxapp 接口调用出错"+o)})}o.checkSession({success:function(o){console.log("App.vue--uni.login登陆状态"),n(e.uniCode)},fail:function(t){console.log("App.vue--uni.login登陆已失效"),o.login({provider:"weixin",success:function(o){e.SET_UNICODE(o.code),o.code?n(o.code):console.log("App.vue--获取code失败")}})}})}navigator&&navigator.userAgent?t():(this.SET_BASEINFO(l({},this.baseInfo,{scm:"wechat"})),this.hasLogin||c())},onShow:function(){console.log("App Show")},onHide:function(){console.log("App Hide")}};n.default=c}).call(this,e("543d")["default"])},"74d4":function(o,n,e){"use strict";e.r(n);var t=e("63a6");for(var a in t)"default"!==a&&function(o){e.d(n,o,function(){return t[o]})}(a);e("1893");var l,i,c=e("2877"),s=Object(c["a"])(t["default"],l,i,!1,null,null,null);n["default"]=s.exports},"80d1":function(o,n,e){}},[["1544","common/runtime","common/vendor"]]]);