(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"0b65":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o("2f62");function r(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},a=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),a.forEach(function(e){n(t,e,o[e])})}return t}function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var s=function(){return o.e("components/loadmore/loadmore").then(o.bind(null,"4c46"))},c=function(){return o.e("components/nomore/nomore").then(o.bind(null,"e20f"))},i={components:{tuiLoadmore:s,tuiNomore:c},data:function(){return{type:0,pageNum:1,productData:[],loadding:!0,pullUpOn:!0,notFound:!1,canReachBottom:!0,listData:[],searchData:{orderState:"",accountId:"",pageNum:1,totalPage:null,query:""},scrollTop:0,old:{scrollTop:0}}},watch:{searchData:{handler:function(t,e){this.searchData.orderState=t.orderState,this.searchData.query=t.query},deep:!0}},methods:{scroll:function(t){this.old.scrollTop=t.detail.scrollTop},goTop:function(t){this.scrollTop=this.old.scrollTop,this.$nextTick(function(){this.scrollTop=0})},transUserState:function(t){switch(t){case 0:return[];case 1:return[0];case 2:return[1,2];case 3:return[3];case 4:return[7];default:return[]}},transOrderState:function(t){switch(t){case 0:return"未支付";case 1:return"未发货";case 2:return"已发货";case 3:return"已完成";case 4:return"已退货";case 5:return"已退款";case 6:return"已取消";case 7:return"退款中";case 9:return"备货中";default:return""}},doQuery:function(e){this.goTop(),this.searchData.pageNum=1,this.type=e,this.loadData(this.transUserState(e)),t.setStorageSync("order_searchType_storage",this.transUserState(e))},handleSearch:function(){var e=this;this.goTop(),this.searchData.pageNum=1,this.type=0,this.$nextTick(function(){e.loadData(e.transUserState(0))}),t.setStorageSync("order_searchType_storage",this.transUserState(0))},loadData:function(t){var e=this;this.loadding=!0,this.pullUpOn=!0,this.searchData=r({},this.searchData,{orderState:t||[]}),this.$http.post("/mall/app/order/list",r({},this.baseInfo,this.searchData,{accountId:this.userInfo&&this.userInfo.accountId||""})).then(function(t){0==t.code?t.result&&(e.searchData.totalPage=t.result.pages,0==t.result.records.length?(e.loadding=!1,e.pullUpOn=!1):e.loadding=!1,1==e.searchData.pageNum?t.result.records&&(e.listData=t.result.records):e.listData=e.listData.concat(t.result.records),e.listData.map(function(t){e.$set(t,"orderStateName",e.transOrderState(t.orderlistState))})):console.log("product.vue-- list获取数据列表失败")}).catch(function(t){console.log("product.vue-- list获取数据列表错误")})},linkToDetail:function(e){t.navigateTo({url:"/pages/orderDetail/orderDetail?orderId="+e})},cancelOrder:function(e){var o=this;t.showModal({title:"提示",content:"确定取消订单吗？",confirmColor:"#E93B3D",success:function(a){a.confirm?o.$http.post("/mall/app/order/cancel",r({},o.baseInfo,{accountId:o.userInfo.accountId,orderId:e})).then(function(e){0==e.code?(t.showToast({icon:"none",title:"取消订单成功"}),o.loadData(t.getStorageSync("order_searchType_storage"))):(t.showToast({icon:"none",title:"取消订单失败"}),o.loadData(t.getStorageSync("order_searchType_storage")))}).catch(function(t){console.log(t)}):a.cancel&&console.log("用户点击取消")}})},linkToPayment:function(e){var o=[];e.map(function(t){o.push({goodsCount:t.goodsCount,mallGoodsId:t.zsscMallGoods.id})}),t.setStorage({key:"buyList",data:o,success:function(){t.navigateTo({url:"/pages/payment/payment"})}})},linkToDelivery:function(e){t.navigateTo({url:"/pages/delivery/delivery?orderId="+e})},confirmOrder:function(e){var o=this;this.$http.post("/mall/app/order/receive",r({},this.baseInfo,{accountId:this.userInfo.accountId,orderId:e})).then(function(e){0==e.code&&(t.showToast({icon:"none",title:"确认收货成功"}),o.loadData(t.getStorageSync("order_searchType_storage")))}).catch(function(t){console.log(t)})},deleteOrder:function(t){}},onLoad:function(e){this.loadData(this.transUserState(Number(e.state))),this.type=e.state,t.setStorageSync("order_searchType_storage",this.transUserState(Number(e.state)))},onReachBottom:function(){this.pullUpOn&&(this.loadding=!0,this.searchData.pageNum++,this.loadData(t.getStorageSync("order_searchType_storage")))},computed:r({},(0,a.mapState)("common",["baseInfo","userInfo"]))};e.default=i}).call(this,o("543d")["default"])},1674:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},r=[];o.d(e,"a",function(){return a}),o.d(e,"b",function(){return r})},1711:function(t,e,o){"use strict";o.r(e);var a=o("1674"),r=o("2800");for(var n in r)"default"!==n&&function(t){o.d(e,t,function(){return r[t]})}(n);o("9b40");var s=o("2877"),c=Object(s["a"])(r["default"],a["a"],a["b"],!1,null,null,null);e["default"]=c.exports},"26ce":function(t,e,o){},2800:function(t,e,o){"use strict";o.r(e);var a=o("0b65"),r=o.n(a);for(var n in a)"default"!==n&&function(t){o.d(e,t,function(){return a[t]})}(n);e["default"]=r.a},"9b40":function(t,e,o){"use strict";var a=o("26ce"),r=o.n(a);r.a}},[["bd66","common/runtime","common/vendor"]]]);