(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/accountManage/accountManage"],{"1ab9":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a("2f62");a("a76c");function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},o=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),o.forEach(function(e){n(t,e,a[e])})}return t}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var s=function(){return Promise.all([a.e("common/vendor"),a.e("components/w-picker/w-picker")]).then(a.bind(null,"0690"))},u={components:{wPicker:s},data:function(){return{formData:{customerImage:"",customerName:"",wechatName:"",customerSex:0,transCustomerBirthday:"",transCustomerSex:""},selectList:[{label:"男",value:0},{label:"女",value:1}]}},computed:r({},(0,o.mapState)("common",["baseInfo","userInfo"])),methods:r({},(0,o.mapMutations)("common",["SET_USERIFNO"]),{uploadAvatar:function(){var e=this;t.chooseImage({success:function(a){var o=a.tempFilePaths;t.uploadFile({url:"/saas/app/backsite/sysFile/upload",header:{Authorization:"Bearer "+t.getStorageSync("token")},filePath:o[0],name:"file",formData:{user:"test"},success:function(t){e.formData=r({},e.formData,{customerImage:JSON.parse(t.data).result.url})},fail:function(t){console.log(t)}})}})},toggleTab:function(t){this.$refs[t].show()},onConfirmSex:function(t){this.formData=r({},this.formData,{transCustomerSex:t.result})},onConfirmBirthday:function(t){this.formData=r({},this.formData,{transCustomerBirthday:t.result})},linkToAddress:function(){t.navigateTo({url:"/pages/address/address"})},saveAccount:function(){var e=this,a=this.transformSexNum(this.formData.transCustomerSex);this.$http.post("/mall/app/account/update",r({},this.baseInfo,this.formData,{customerBirthday:this.formData.transCustomerBirthday,customerSex:a})).then(function(a){t.showToast({icon:"none",title:"修改成功"}),e.setUserInfo()}).catch(function(t){console.log(t)})},transformSexNum:function(t){switch(t){case"男":return 1;case"女":return 0}},transformSex:function(t){switch(t){case 0:return"女";case 1:return"男"}},setUserInfo:function(){var t=this;this.$http.post("/mall/app/account/info").then(function(e){if(0==e.code){if(e.result){var o=e.result.mobilephone,n=e.result.customer,s=n.accountId,u=n.customerName,c=n.wechatName,i=n.customerSex,f=n.customerBirthday,m=n.customerImage,l=n.customerId;if(t.SET_USERIFNO({accountId:s,customerName:u,wechatName:c,customerSex:i,customerBirthday:f,customerImage:m,customerId:l}),t.SET_USERIFNO(r({},t.userInfo,{mobilephone:o})),t.formData=t.userInfo,t.formData.customerBirthday){var d=a("0a39"),h=d(t.formData.customerBirthday,d.ISO_8601);t.formData.transCustomerBirthday=h.format("YYYY-MM-DD")||""}t.formData.transCustomerSex=t.transformSex(t.formData.customerSex)}}else console.log("login.vue-- info接口调用失败")}).catch(function(t){console.log("login.vue-- info接口调用错误")})}}),watch:{formData:{handler:function(t,e){this.formData.transCustomerBirthday=t.transCustomerBirthday,this.formData.transCustomerSex=t.transCustomerSex,this.formData.customerImage=t.customerImage},deep:!0}},onLoad:function(){this.setUserInfo()}};e.default=u}).call(this,a("543d")["default"])},"4d47":function(t,e,a){"use strict";var o=a("a02d"),r=a.n(o);r.a},a02d:function(t,e,a){},cba1:function(t,e,a){"use strict";a.r(e);var o=a("1ab9"),r=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,function(){return o[t]})}(n);e["default"]=r.a},d7fd:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},r=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return r})},e92d:function(t,e,a){"use strict";a.r(e);var o=a("d7fd"),r=a("cba1");for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a("4d47");var s=a("2877"),u=Object(s["a"])(r["default"],o["a"],o["b"],!1,null,null,null);e["default"]=u.exports}},[["9fc1","common/runtime","common/vendor"]]]);